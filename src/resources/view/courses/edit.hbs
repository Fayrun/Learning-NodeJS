<div class="container-middle">
  <div class="row mt-3">
    <div class="col-md-8 offset-md-2 mt-3 mb-3">
      <h1 class="mb-4 anime-text-title">Chỉnh sửa Anime</h1>

      <form id="edit-form">
        <input type="hidden" id="courseId" value="{{course._id}}" />

        <div class="mb-3">
          <label for="name" class="form-label anime-text">Tên Anime</label>
          <input type="text" class="form-control" id="name" name="name" value="{{course.name}}" required />
        </div>

        <div class="mb-3">
          <label for="description" class="form-label anime-text">Mô tả</label>
          <textarea class="form-control" id="description" name="description" rows="4" required>{{course.description}}</textarea>
        </div>

        <div class="mb-3">
          <label for="image" class="form-label anime-text">Image URL</label>
          <input type="text" class="form-control" id="image" name="image" value="{{course.image}}" />
        </div>

        <div class="mb-3">
          <label for="videoId" class="form-label anime-text">Video ID</label>
          <input type="text" class="form-control" id="videoId" name="videoId" value="{{course.videoId}}" />
        </div>

        <div class="mb-3">
          <label for="numberOfEpisodes" class="form-label anime-text">Số tập</label>
          <input type="number" class="form-control" id="numberOfEpisodes" name="numberOfEpisodes" min="1" value="{{course.numberOfEpisodes}}" required />
        </div>

        <div class="mb-3">
          <label for="duration" class="form-label anime-text">Thời lượng (phút/tập)</label>
          <input type="number" class="form-control" id="duration" name="duration" min="1" value="{{course.duration}}" required />
        </div>

        <div class="mb-3">
          <label for="status" class="form-label anime-text">Trạng thái</label>
          <select class="form-select" id="status" name="status" required>
            <option value="Dang chieu" {{#if (eq course.status "Dang chieu")}}selected{{/if}}>Dang chieu</option>
            <option value="Hoan thanh" {{#if (eq course.status "Hoan thanh")}}selected{{/if}}>Hoan thanh</option>
            <option value="Sap chieu" {{#if (eq course.status "Sap chieu")}}selected{{/if}}>Sap chieu</option>
          </select>
        </div>

        <div class="mb-3">
          <label for="country" class="form-label anime-text">Quốc gia</label>
          <input type="text" class="form-control" id="country" name="country" value="{{course.country}}" required />
        </div>

        <div class="mb-3">
          <label for="studio" class="form-label anime-text">Nhà sản xuất</label>
          <input type="text" class="form-control" id="studio" name="studio" value="{{course.studio}}" required />
        </div>

        <div class="mb-3">
          <label for="warning" class="form-label anime-text">Chú ý</label>
          <select class="form-select" id="warning" name="warning" required>
            <option value="None" {{#if (eq course.warning "None")}}selected{{/if}}>None</option>
            <option value="R18+" {{#if (eq course.warning "R18+")}}selected{{/if}}>R18+ - Can nhac truoc khi xem</option>
          </select>
        </div>

        <div class="mb-3">
          <label class="form-label anime-text">Thể loại</label>
          <div class="row row-cols-2 g-2 border rounded p-3">
            <div class="col"><div class="form-check">
              <input class="form-check-input genre-check" type="checkbox" value="Action" id="genre-action" />
              <label class="form-check-label anime-text" for="genre-action">Action</label>
            </div></div>
            <div class="col"><div class="form-check">
              <input class="form-check-input genre-check" type="checkbox" value="Shounen" id="genre-shounen" />
              <label class="form-check-label anime-text" for="genre-shounen">Shounen</label>
            </div></div>
            <div class="col"><div class="form-check">
              <input class="form-check-input genre-check" type="checkbox" value="Romance" id="genre-romance" />
              <label class="form-check-label anime-text" for="genre-romance">Romance</label>
            </div></div>
            <div class="col"><div class="form-check">
              <input class="form-check-input genre-check" type="checkbox" value="Mecha" id="genre-mecha" />
              <label class="form-check-label anime-text" for="genre-mecha">Mecha</label>
            </div></div>
            <div class="col"><div class="form-check">
              <input class="form-check-input genre-check" type="checkbox" value="Isekai" id="genre-isekai" />
              <label class="form-check-label anime-text" for="genre-isekai">Isekai</label>
            </div></div>
            <div class="col"><div class="form-check">
              <input class="form-check-input genre-check" type="checkbox" value="Harem" id="genre-harem" />
              <label class="form-check-label anime-text" for="genre-harem">Harem</label>
            </div></div>
            <div class="col"><div class="form-check">
              <input class="form-check-input genre-check" type="checkbox" value="Adventure" id="genre-adventure" />
              <label class="form-check-label anime-text" for="genre-adventure">Adventure</label>
            </div></div>
            <div class="col"><div class="form-check">
              <input class="form-check-input genre-check" type="checkbox" value="School" id="genre-school" />
              <label class="form-check-label anime-text" for="genre-school">School</label>
            </div></div>
            <div class="col"><div class="form-check">
              <input class="form-check-input genre-check" type="checkbox" value="Slice of life" id="genre-sol" />
              <label class="form-check-label anime-text" for="genre-sol">Slice of life</label>
            </div></div>
            <div class="col"><div class="form-check">
              <input class="form-check-input genre-check" type="checkbox" value="Horror" id="genre-horror" />
              <label class="form-check-label anime-text" for="genre-horror">Horror</label>
            </div></div>
          </div>
          <small class="text-muted">Chon mot hoac nhieu the loai</small>
        </div>

        <div class="mb-3">
          <label for="releaseYear" class="form-label anime-text">Năm phát hành</label>
          <select class="form-select" id="releaseYear" name="releaseYear" required data-saved="{{course.releaseYear}}">
            <option value="" disabled>-- Chon nam --</option>
          </select>
        </div>

        <div class="d-grid gap-2">
          <button type="submit" id="submit-btn" class="btn btn-primary">Cap nhat Anime</button>
          <a href="/courses" class="btn btn-secondary">Cancel</a>
        </div>

        <div id="toast" class="alert d-none mt-3" role="alert"></div>
      </form>
    </div>
  </div>
</div>

<script>
  var currentGenres = {{{json course.Genre}}};
</script>
<script src="/js/year-selected.js"></script>
<script src="/js/edit_courses.js"></script>