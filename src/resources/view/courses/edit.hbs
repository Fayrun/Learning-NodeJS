<div class="container mt-5">
  <div class="row">
    <div class="col-md-8 offset-md-2">
      <h1 class="mb-4">Chỉnh sửa Anime</h1>

      <form id="edit-form">
        <input type="hidden" id="courseId" value="{{course._id}}" />

        <div class="mb-3">
          <label for="name" class="form-label">Tên Anime</label>
          <input
            type="text"
            class="form-control"
            id="name"
            name="name"
            value="{{course.name}}"
            required
          />
        </div>

        <div class="mb-3">
          <label for="description" class="form-label">Mô tả</label>
          <textarea
            class="form-control"
            id="description"
            name="description"
            rows="4"
            required
          >{{course.description}}</textarea>
        </div>

        <div class="mb-3">
          <label for="image" class="form-label">Image URL</label>
          <input
            type="text"
            class="form-control"
            id="image"
            name="image"
            value="{{course.image}}"
          />
        </div>

        <div class="mb-3">
          <label for="videoId" class="form-label">Video ID</label>
          <input
            type="text"
            class="form-control"
            id="videoId"
            name="videoId"
            value="{{course.videoId}}"
          />
        </div>
        <div class="mb-3">
          <label for="numberOfEpisodes" class="form-label">Số tập</label>
          <input
            type="number"
            class="form-control"
            id="numberOfEpisodes"
            name="numberOfEpisodes"
            min="1"
            value="{{course.numberOfEpisodes}}"
            required
          />
        </div>
        <div class="mb-3">
          <label class="form-label">Thể loại</label>
          <div class="row row-cols-2 g-2 border rounded p-3">
            <div class="col">
              <div class="form-check">
                <input
                  class="form-check-input genre-check"
                  type="checkbox"
                  value="Action"
                  id="genre-action"
                />
                <label
                  class="form-check-label"
                  for="genre-action"
                >Action</label>
              </div>
            </div>
            <div class="col">
              <div class="form-check">
                <input
                  class="form-check-input genre-check"
                  type="checkbox"
                  value="Shounen"
                  id="genre-shounen"
                />
                <label
                  class="form-check-label"
                  for="genre-shounen"
                >Shounen</label>
              </div>
            </div>
            <div class="col">
              <div class="form-check">
                <input
                  class="form-check-input genre-check"
                  type="checkbox"
                  value="Romance"
                  id="genre-romance"
                />
                <label
                  class="form-check-label"
                  for="genre-romance"
                >Romance</label>
              </div>
            </div>
            <div class="col">
              <div class="form-check">
                <input
                  class="form-check-input genre-check"
                  type="checkbox"
                  value="Mecha"
                  id="genre-mecha"
                />
                <label class="form-check-label" for="genre-mecha">Mecha</label>
              </div>
            </div>
            <div class="col">
              <div class="form-check">
                <input
                  class="form-check-input genre-check"
                  type="checkbox"
                  value="Isekai"
                  id="genre-isekai"
                />
                <label
                  class="form-check-label"
                  for="genre-isekai"
                >Isekai</label>
              </div>
            </div>
            <div class="col">
              <div class="form-check">
                <input
                  class="form-check-input genre-check"
                  type="checkbox"
                  value="Harem"
                  id="genre-harem"
                />
                <label class="form-check-label" for="genre-harem">Harem</label>
              </div>
            </div>
            <div class="col">
              <div class="form-check">
                <input
                  class="form-check-input genre-check"
                  type="checkbox"
                  value="Adventure"
                  id="genre-adventure"
                />
                <label
                  class="form-check-label"
                  for="genre-adventure"
                >Adventure</label>
              </div>
            </div>
            <div class="col">
              <div class="form-check">
                <input
                  class="form-check-input genre-check"
                  type="checkbox"
                  value="School"
                  id="genre-school"
                />
                <label
                  class="form-check-label"
                  for="genre-school"
                >School</label>
              </div>
            </div>
            <div class="col">
              <div class="form-check">
                <input
                  class="form-check-input genre-check"
                  type="checkbox"
                  value="Slice of life"
                  id="genre-sol"
                />
                <label class="form-check-label" for="genre-sol">Slice of life</label>
              </div>
            </div>
            <div class="col">
              <div class="form-check">
                <input
                  class="form-check-input genre-check"
                  type="checkbox"
                  value="Horror"
                  id="genre-horror"
                />
                <label
                  class="form-check-label"
                  for="genre-horror"
                >Horror</label>
              </div>
            </div>
          </div>
          <small class="text-muted">Chọn một hoặc nhiều thể loại</small>
        </div>
        <div class="mb-3">
          <label for="releaseYear" class="form-label">Năm phát hành</label>
          <select
            class="form-select"
            id="releaseYear"
            name="releaseYear"
            required
          >
            <option value="" disabled>-- Chọn năm --</option>
          </select>
        </div>
        <div class="d-grid gap-2">
          <button type="submit" id="submit-btn" class="btn btn-primary">Cập nhật
            Anime</button>
          <a href="/courses" class="btn btn-secondary">Cancel</a>
        </div>

        <div id="toast" class="alert d-none mt-3" role="alert"></div>
      </form>
    </div>
  </div>
</div>

<script>
  var currentGenres =
  {{{json course.Genre}}}; var savedYear =
  {{course.releaseYear}}; var yearSelect =
  document.getElementById("releaseYear"); var currentYear = new
  Date().getFullYear(); for (var y = currentYear; y >= 1995; y--) { var opt =
  document.createElement("option"); opt.value = y; opt.textContent = y; if (y
  === savedYear) opt.selected = true; yearSelect.appendChild(opt); }
</script>

<script src="/js/edit_courses.js"></script>